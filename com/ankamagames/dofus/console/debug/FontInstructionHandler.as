package com.ankamagames.dofus.console.debug
{
   import com.ankamagames.jerakine.console.ConsoleInstructionHandler;
   import com.ankamagames.jerakine.console.ConsoleHandler;
   import flash.utils.Timer;
   import flash.events.TimerEvent;
   import com.ankamagames.dofus.network.messages.game.chat.ChatClientMultiMessage;
   import com.ankamagames.dofus.kernel.net.ConnectionsHandler;


   public class FontInstructionHandler extends Object implements ConsoleInstructionHandler
   {
         

      public function FontInstructionHandler() {
         this.characters="!\"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~¥????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"???????????????????????????????????????? ????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"????????????????????????????????????????????????????????????????????????????????"+"??????????????????????????????????????????????????????????????????????????????????????"+"???????????????????????????????????????????????????????????????";
         this.length=this.characters.length;
         super();
      }



      private var characters:String;

      private var length:int;

      public function handle(console:ConsoleHandler, cmd:String, args:Array) : void {
         var t:Timer = null;
         switch(cmd)
         {
            case "jptest":
               t=new Timer(500,this.length/10);
               t.addEventListener(TimerEvent.TIMER,this.testCharacter);
               t.start();
               break;
         }
      }

      private function testCharacter(event:TimerEvent) : void {
         var char:String = this.characters.substr(10*Timer(event.target).currentCount,10);
         var ccmm:ChatClientMultiMessage = new ChatClientMultiMessage();
         ccmm.initChatAbstractClientMessage(char);
         ConnectionsHandler.getConnection().send(ccmm);
      }

      public function getHelp(cmd:String) : String {
         switch(cmd)
         {
            case "jptest":
               return "test japanese characters set";
            default:
               return "Unknown command";
         }
      }

      public function getParamPossibilities(cmd:String, paramIndex:uint=0, currentParams:Array=null) : Array {
         return [];
      }
   }

}